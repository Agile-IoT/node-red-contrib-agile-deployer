<!--
*******************************************************************************
* Copyright (c) 2018 Atos, and others
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License 2.0
* which accompanies this distribution, and is available at
* https://www.eclipse.org/legal/epl-2.0/
*
* Contributors:
* Atos - initial implementation
*******************************************************************************
-->
<script type="text/javascript">
    RED.nodes.registerType('heroku-deploy',{
        category: 'agile',
        color: '#a6bbcf',
        defaults: {
            name: {value:""},
            appname: {value: "", required: true},
            apikey: {value:"", required: true},
            archive: {value: "https://github.com/node-red/node-red/releases/download/0.18.4/node-red-0.18.4.zip", required: true},
            deployerurl: {value: "http://agile-paas-deployer:8002", required: true}
        },
        inputs:1,
        outputs:0,
        icon: "white-globe.png",
        label: function() {
            return this.name||"HerokuDeploy";
        },
        oneditprepare: function() {
            var node = this;
        }
    });
</script>

<script type="text/x-red" data-template-name="heroku-deploy">
    <div class="form-row">
        <label for="node-input-apikey"><i class="icon-tag"></i> API Key </label>
        <input type="text" id="node-input-apikey">
    </div>
    <div class="form-row">
        <label for="node-input-appname"><i class="icon-tag"></i> Application name </label>
        <input type="text" id="node-input-appname">
    </div>
    <div class="form-row">
        <label for="node-input-archive"><i class="icon-tag"></i> Node-RED archive URL </label>
        <input type="text" id="node-input-archive">
    </div>
    <div class="form-row">
        <label for="node-input-deployerurl"><i class="icon-tag"></i> AGILE PaaS Deployer URL </label>
        <input type="text" id="node-input-deployerurl">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>

<script type="text/x-red" data-help-name="heroku-deploy">
    <p>This node deploys a Node-RED runtime on Heroku. It requires
      the AGILE PaaS Deployer to work.
    </p>

    <h3>Parameters</h3>
    <dl>
        <dt>API Key</dt>
        <dd>User API key to connect to Heroku</dd>
        <dt>Application name</dt>
        <dd>The Heroku application name. Remember that this name must be unique
          between all deployed applications on Heroku
        </dd>
        <dt>Node-RED archive URL</dt>
        <dd>The url with the distributable Node-RED file. It is prefilled with
          the 0.18.4 version.
        </dd>
        <dt>PaaS deployer URL</dt>
        <dd>URL of the AGILE PaaS Deployer</dd>
    </dl>

</script>
